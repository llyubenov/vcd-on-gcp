resource "google_vmwareengine_private_cloud" "vmw-engine-sddc" {
  location    = var.sddc_zone
  name        = var.sddc_name
  description = var.sddc_description
  type        = var.sddc_type
  network_config {
    management_cidr       = var.sddc_mgmt_subnet_cidr
    vmware_engine_network = var.gcve_network_id
  }
  management_cluster {
    cluster_id = var.sddc_cluster_name
    node_type_configs {
      node_type_id = var.sddc_node_type_id
      node_count   = var.sddc_node_count
    }
  }
}

resource "google_vmwareengine_subnet" "vmw-engine-workload-subnet" {
  count = var.sddc_workload_subnet ? 1 : 0
  name = var.sddc_workload_subnet_name
  parent =  google_vmwareengine_private_cloud.vmw-engine-sddc.id
  ip_cidr_range = var.sddc_workload_subnet_cidr
}
